# License-Plate-Recognition-v2
## License Plate Recognition v2
## 车牌识别
### 流程
方案使用yolo26-pose定位车牌位置, 获取车牌4个顶点后, 用opencv提取车牌并做透视变换转为长方形. 然后缩放为宽880高280 (蓝牌标准为宽440mm高140mm). Gauss模糊后做直方图均衡化, 然后提取蓝底白字. 具体做法是以下几个步骤. 先将车牌二值化, 目的是提取白字为前景. 由于背景蓝色饱和度高, 白字饱和度低, 但亮度高. 故转为HSV色彩空间后使用opencv中inRange做二值化. 提取白字的大概框架后目的是得到每个字符的边界框, 从而分割出字符. 由于提取的前景中会有不应该出现的不属于字符的白点, 白点普遍高度较小, 而属于白字符的连续白色像素高度较大, 故使用宽为1高为15的结构元进行腐蚀可以消除白点又不使白字符消失. 然后使用宽为1, 较大的高为180的架构元进行膨胀, 使得白字填充整个高, 变成白块. 最后使用宽为3高为1的结构元进行膨胀从而适当扩宽白块. 几个字符就变成若干个白块. 之后使用opencv中findContours获取轮廓, 使用boundingRect得到边界框. 只保留宽大于15小于150高大于150的框. 由于车牌第一个汉字分割时可能会将偏旁部首拆开. 于是通过判断若第一个白块和第二个白块间隔小于60时 (不同字符间的间隔会大于60) 将第一个白块和第二个白块合并. 由于车牌标准中第二个字符和第三个字符间会有一个较大的白点, 可能会被提取到. 通过判断若有8个白块则删除第3个 (即白点). 最终得到7个字符白块边界框. 提取字符后使用resnet18进行分类. 第一个汉字使用一个模型, 后6个字符使用另一个模型.


### 文件说明
preprocess  select_train_lp_yolo.py 准备yolo训练数据集 split_alpha.py 准备resnet训练数据集

resnet  train.py resnet18训练代码 export_onnx.py 将resnet18 .pth权重导出为.onnx代码

yolo yolo26训练与导出代码




